import C.time

linkage("pthread")
include("pthread.h")

def:type thrd_t *Void
def:type mtx_t  *Void
def:type once_flag *Void

struct xtime
  time_t sec
  Int:64 nsec
end

enum
  mtx_plain     = 0
  mtx_timed     = 1
  mtx_recursive = 2
end

def:type thrd_start_t (*Void; Int)

def:func thrd_sleep(* @const xtime time)
def:func thrd_create(*thrd_t thr, thrd_start_t func, *Void arg; Int)

def:func mtx_init(*mtx_t mtx, Int type; Int)

def:func call_once(*once_flag flag, () func)
